---
type Stat = {
  value: string;
  label: string;
  source?: string;
  sourceUrl?: string;
};

const { stats = [] }: { stats: Stat[] } = Astro.props;
---
{stats.length > 0 && (
  <div class="grid gap-5 sm:grid-cols-2 lg:grid-cols-4">
    {stats.map((stat) => (
      <article class="flex h-full flex-col items-center justify-between rounded-2xl border border-btr-muted bg-white/90 px-6 py-7 text-center shadow-sm transition hover:-translate-y-1 hover:border-btr-accent/30 hover:shadow-md">
        <div class="space-y-2">
          <p class="text-3xl font-semibold tracking-tight text-btr-accent">{stat.value}</p>
          <p class="text-sm font-medium text-btr-text/80">{stat.label}</p>
        </div>
        {stat.source && (
          <p class="mt-5 text-[0.68rem] font-semibold uppercase tracking-[0.28em] text-btr-text/50">
            <span class="mr-1 text-btr-text/40">Source:</span>
            {stat.sourceUrl ? (
              <a
                href={stat.sourceUrl}
                class="inline-flex items-center gap-1 text-btr-text/70 underline decoration-dotted underline-offset-2 transition hover:text-btr-accent"
                target="_blank"
                rel="noopener noreferrer"
                aria-label={`View citation for ${stat.label}`}
              >
                {stat.source}
                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                  <path d="M7.5 4a.5.5 0 0 0 0 1h5.793L5.146 13.146a.5.5 0 1 0 .708.708L14 5.707V11.5a.5.5 0 0 0 1 0V4.5a.5.5 0 0 0-.5-.5H7.5Z" />
                </svg>
              </a>
            ) : (
              stat.source
            )}
          </p>
        )}
      </article>
    ))}
  </div>
)}
