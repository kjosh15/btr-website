---
type Logo = {
  name: string;
  file?: string;
};

const { logos = [] }: { logos: Logo[] } = Astro.props;
const marqueeItems = logos.concat(logos);
---
<div class="logo-marquee overflow-hidden rounded-2xl border border-btr-muted bg-white/90 p-6">
  {logos.length ? (
    <div class="logo-track flex gap-10">
      {marqueeItems.map((logo, index) => (
        <figure class="flex h-16 min-w-[160px] items-center justify-center text-center text-xs uppercase tracking-wide text-btr-text/60">
          {logo.file ? (
            <img
              src={`logos/${logo.file}`}
              alt={logo.name}
              class="max-h-12 w-auto opacity-85 filter grayscale transition duration-200 hover:opacity-100 hover:grayscale-0"
              loading={index < logos.length ? 'eager' : 'lazy'}
            />
          ) : (
            <span>{logo.name}</span>
          )}
        </figure>
      ))}
    </div>
  ) : (
    <div class="text-center text-sm text-btr-text/70">
      Add SVG or PNG logos to <code class="rounded bg-btr-muted px-1">public/logos</code> and list them in the content frontmatter.
    </div>
  )}
</div>

<style>
.logo-marquee {
  mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
}

.logo-track {
  animation: logo-scroll 32s linear infinite;
}

@keyframes logo-scroll {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}
</style>
